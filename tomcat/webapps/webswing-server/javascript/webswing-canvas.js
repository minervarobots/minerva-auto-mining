webswingRequirejs.define(["jquery"],function(){return function(){function o(){r==null&&(n.cfg.rootElement.append('<canvas data-id="canvas" style="display:block" width="'+a()+'" height="'+f()+'" tabindex="-1"/>'),n.cfg.rootElement.append('<input data-id="input-handler" class="input-hidden" type="text" value="" />'),r=n.cfg.rootElement.find('canvas[data-id="canvas"]'),i=n.cfg.rootElement.find('input[data-id="input-handler"]')),s==null&&(s=setInterval(function(){if(!n.cfg.mirror&&(r.width()!==a()||r.height()!==f())){var e=l().getContext("2d").getImageData(0,0,l().width,l().height);l().width=a(),l().height=f(),l().getContext("2d").putImageData(e,0,0),n.sendHandshake()}},500))}function u(){r!=null&&(r.remove(),i.remove(),r=null,i=null),s!=null&&(clearInterval(s),s=null)}function a(){return n.cfg.rootElement.width()}function f(){return n.cfg.rootElement.height()}function l(){return(r==null||s!=null)&&o(),r[0]}function c(){return i==null&&o(),i[0]}var t=this,n;t.injects=n={cfg:"webswing.config",sendHandshake:"base.handshake"},t.provides={dispose:u,get:l,getInput:c};var r,i,s}});
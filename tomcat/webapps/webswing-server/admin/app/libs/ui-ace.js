angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(e){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");return{restrict:"EA",require:"?ngModel",link:function(t,n,r,i){var s,o,u,a,f;s=e.ace||{},o=angular.extend({},s,t.$eval(r.uiAce)),u=window.ace.edit(n[0]),a=u.getSession(),f=function(e){return function(n){var s=a.getValue();s!==t.$eval(r.value)&&!t.$$phase&&!t.$root.$$phase&&(angular.isDefined(i)&&t.$apply(function(){i.$setViewValue(s)}),angular.isDefined(e)&&t.$apply(function(){if(!angular.isFunction(e))throw new Error("ui-ace use a function as callback.");e(n,u)}))}},angular.isDefined(o.showGutter)&&u.renderer.setShowGutter(o.showGutter),angular.isDefined(o.useWrapMode)&&a.setUseWrapMode(o.useWrapMode),angular.isFunction(o.onLoad)&&o.onLoad(u),angular.isString(o.theme)&&u.setTheme("ace/theme/"+o.theme),angular.isString(o.mode)&&a.setMode("ace/mode/"+o.mode),r.$observe("readonly",function(e){u.setReadOnly(e==="true")}),angular.isDefined(i)&&(i.$formatters.push(function(e){if(angular.isUndefined(e)||e===null)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-ace cannot use an object or an array as a model");return e}),i.$render=function(){a.setValue(i.$viewValue)}),a.on("change",f(o.onChange)),n.on("$destroy",function(){u.session.$stopWorker(),u.destroy()}),t.$watch(function(){return[n[0].offsetWidth,n[0].offsetHeight]},function(){u.resize(),u.renderer.updateFull()},!0)}}}]);
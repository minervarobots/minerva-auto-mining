/**
 * angular-ui-utils - Swiss-Army-Knife of AngularJS tools (with no external dependencies!)
 * @version v0.1.1 - 2014-02-05
 * @link http://angular-ui.github.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(e,t){t=t||{},angular.forEach(t,function(t,n){angular.isString(t)&&(t={replace:!0,template:t}),e.directive(n,function(){return t})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(t,n,r){var i=t.$eval(r.uiEvent);angular.forEach(i,function(r,i){var s=e(r);n.bind(i,function(e){var n=Array.prototype.slice.call(arguments);n=n.splice(1),s(t,{$event:e,$params:n}),t.$$phase||t.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(e,t){var n=e;if(angular.isString(n)&&t!==undefined){!angular.isArray(t)&&!angular.isObject(t)&&(t=[t]);if(angular.isArray(t)){var r=t.length,i=function(e,n){return n=parseInt(n,10),n>=0&&n<r?t[n]:e};n=n.replace(/\$([0-9]+)/g,i)}else angular.forEach(t,function(e,t){n=n.split(":"+t).join(e)})}return n}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(e,t,n){return t||angular.isNumber(t)?(e=e.toString(),t=t.toString(),n?e.split(t).join('<span class="ui-match">'+t+"</span>"):e.replace(new RegExp(t,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(e,t,n,r){return{restrict:"ECA",terminal:!0,compile:function(i,s){var o=s.uiInclude||s.src,u=s.fragment||"",a=s.onload||"",f=s.autoscroll;return function(i,s){function p(){var p=++l,d=i.$eval(o),v=i.$eval(u);d?e.get(d,{cache:t}).success(function(e){if(p!==l)return;c&&c.$destroy(),c=i.$new();var t;v?t=angular.element("<div/>").html(e).find(v):t=angular.element("<div/>").html(e).contents(),s.html(t),r(t)(c),angular.isDefined(f)&&(!f||i.$eval(f))&&n(),c.$emit("$includeContentLoaded"),i.$eval(a)}).error(function(){p===l&&h()}):h()}var l=0,c,h=function(){c&&(c.$destroy(),c=null),s.html("")};i.$watch(u,p),i.$watch(o,p)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(e,t){return!t.type||t.type.toLowerCase()!=="checkbox"?angular.noop:function(e,t,n){e.$watch(n.uiIndeterminate,function(e){t[0].indeterminate=!!e})}}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function t(e,t){return e.replace(/[A-Z]/g,function(e){return t+e})}var n={humanize:function(n){return e(t(n," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+t(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(t){return t=t.substr(0,1).toLowerCase()+e(t.split("_").join(" ")).substr(1).split(" ").join(""),t}};return function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",n[t](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(t,n){return{restrict:"A",compile:function(r,i){if(!angular.isFunction(r[i.uiJq]))throw new Error('ui-jq: The "'+i.uiJq+'" function does not exist');var s=t&&t[i.uiJq];return function(t,r,i){function u(){n(function(){r[i.uiJq].apply(r,o)},0,!1)}var o=[];i.uiOptions?(o=t.$eval("["+i.uiOptions+"]"),angular.isObject(s)&&angular.isObject(o[0])&&(o[0]=angular.extend({},s,o[0]))):s&&(o=[s]),i.ngModel&&r.is("select,input,textarea")&&r.bind("change",function(){r.trigger("input")}),i.uiRefresh&&t.$watch(i.uiRefresh,function(){u()}),u()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(t){var n={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},r=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(e,i,s,o){var u,a=[];u=i.$eval(o["ui"+r(e)]),angular.forEach(u,function(e,n){var r,i;i=t(e),angular.forEach(n.split(" "),function(e){r={expression:i,keys:{}},angular.forEach(e.split("-"),function(e){r.keys[e]=!0}),a.push(r)})}),s.bind(e,function(t){var r=!!t.metaKey&&!t.ctrlKey,s=!!t.altKey,o=!!t.ctrlKey,u=!!t.shiftKey,f=t.keyCode;e==="keypress"&&!u&&f>=97&&f<=122&&(f-=32),angular.forEach(a,function(e){var a=e.keys[n[f]]||e.keys[f.toString()],l=!!e.keys.meta,c=!!e.keys.alt,h=!!e.keys.ctrl,p=!!e.keys.shift;a&&l===r&&c===s&&h===o&&p===u&&i.$apply(function(){e.expression(i,{$event:t})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(t,n,r){e("keydown",t,n,r)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(t,n,r){e("keypress",t,n,r)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(t,n,r){e("keyup",t,n,r)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(e){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var n=e;return function(t,r,i,s){function S(e){return angular.isDefined(e)?(B(e),o?(L(),A(),!0):k()):k()}function x(e){if(!angular.isDefined(e))return;l=e,o&&q()}function T(e){return o?(p=_(e||""),v=M(p),s.$setValidity("mask",v),v&&p.length?D(p):undefined):e}function N(e){return o?(p=_(e||""),v=M(p),s.$viewValue=p.length?D(p):"",s.$setValidity("mask",v),p===""&&s.$error.required!==undefined&&s.$setValidity("required",!1),v?p:undefined):e}function k(){return o=!1,O(),angular.isDefined(m)?r.attr("placeholder",m):r.removeAttr("placeholder"),angular.isDefined(g)?r.attr("maxlength",g):r.removeAttr("maxlength"),r.val(s.$modelValue),s.$viewValue=s.$modelValue,!1}function L(){p=b=_(s.$modelValue||""),d=y=D(p),v=M(p);var e=v&&p.length?d:"";i.maxlength&&r.attr("maxlength",a[a.length-1]*2),r.attr("placeholder",l),r.val(e),s.$viewValue=e}function A(){if(u)return;r.bind("blur",j),r.bind("mousedown mouseup",F),r.bind("input keyup click focus",q),u=!0}function O(){if(!u)return;r.unbind("blur",j),r.unbind("mousedown",F),r.unbind("mouseup",F),r.unbind("input",q),r.unbind("keyup",q),r.unbind("click",q),r.unbind("focus",q),u=!1}function M(e){return e.length?e.length>=h:!0}function _(e){var t="",n=f.slice();return e=e.toString(),angular.forEach(c,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){n.length&&n[0].test(e)&&(t+=e,n.shift())}),t}function D(e){var t="",n=a.slice();return angular.forEach(l.split(""),function(r,i){e.length&&i===n[0]?(t+=e.charAt(0)||"_",e=e.substr(1),n.shift()):t+=r}),t}function P(e){var t=i.placeholder;return typeof t!="undefined"&&t[e]?t[e]:"_"}function H(){return l.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function B(e){var t=0;a=[],f=[],l="";if(typeof e=="string"){h=0;var n=!1,r=e.split("");angular.forEach(r,function(e,r){C.maskDefinitions[e]?(a.push(t),l+=P(r),f.push(C.maskDefinitions[e]),t++,n||h++):e==="?"?n=!0:(l+=e,t++)})}a.push(a.slice().pop()+1),c=H(),o=a.length>1?!0:!1}function j(){w=0,E=0;if(!v||p.length===0)d="",r.val(""),t.$apply(function(){s.$setViewValue("")})}function F(e){e.type==="mousedown"?r.bind("mouseout",I):r.unbind("mouseout",I)}function I(){E=W(this),r.unbind("mouseout",I)}function q(e){e=e||{};var n=e.which,i=e.type;if(n===16||n===91)return;var o=r.val(),u=y,f,l=_(o),c=b,h=!1,p=U(this)||0,d=w||0,v=p-d,m=a[0],g=a[l.length]||a.slice().shift(),S=E||0,x=W(this)>0,T=S>0,N=o.length>u.length||S&&o.length>u.length-S,C=o.length<u.length||S&&o.length===u.length-S,k=n>=37&&n<=40&&e.shiftKey,L=n===37,A=n===8||i!=="keyup"&&C&&v===-1,O=n===46||i!=="keyup"&&C&&v===0&&!T,M=(L||A||i==="click")&&p>m;E=W(this);if(k||x&&(i==="click"||i==="keyup"))return;if(i==="input"&&C&&!T&&l===c){while(A&&p>m&&!R(p))p--;while(O&&p<g&&a.indexOf(p)===-1)p++;var P=a.indexOf(p);l=l.substring(0,P)+l.substring(P+1),h=!0}f=D(l),y=f,b=l,r.val(f),h&&t.$apply(function(){s.$setViewValue(l)}),N&&p<=m&&(p=m+1),M&&p--,p=p>g?g:p<m?m:p;while(!R(p)&&p>m&&p<g)p+=M?-1:1;(M&&p<g||N&&!R(d))&&p++,w=p,z(this,p)}function R(e){return a.indexOf(e)>-1}function U(e){if(!e)return 0;if(e.selectionStart!==undefined)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",-e.value.length),t.text.length}return 0}function z(e,t){if(!e)return 0;if(e.offsetWidth===0||e.offsetHeight===0)return;if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}function W(e){return e?e.selectionStart!==undefined?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var o=!1,u=!1,a,f,l,c,h,p,d,v,m=i.placeholder,g=i.maxlength,y,b,w,E,C={};i.uiOptions?(C=t.$eval("["+i.uiOptions+"]"),angular.isObject(C[0])&&(C=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]?angular.extend(t[n],e[n]):t[n]=angular.copy(e[n]));return t}(n,C[0]))):C=n,i.$observe("uiMask",S),i.$observe("placeholder",x),s.$formatters.push(T),s.$parsers.push(N),r.bind("mousedown mouseup",F),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:r!==0&&r!==Infinity&&r!==-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var t=null;return e!==undefined&&(t=e),{require:"ngModel",link:function(e,n,r,i){var s;s=angular.element('<a class="ui-reset" />'),n.wrap('<span class="ui-resetwrap" />').after(s),s.bind("click",function(n){n.preventDefault(),e.$apply(function(){r.uiReset?i.$setViewValue(e.$eval(r.uiReset)):i.$setViewValue(t),i.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,t){return{restrict:"AC",scope:!0,compile:function(n,r){var i;if(r.uiRoute)i="uiRoute";else if(r.ngHref)i="ngHref";else{if(!r.href)throw new Error("uiRoute missing a route or href property on "+n[0]);i="href"}return function(n,r,s){function a(t){var r=t.indexOf("#");r>-1&&(t=t.substr(r+1)),u=function(){o(n,e.path().indexOf(t)>-1)},u()}function f(t){var r=t.indexOf("#");r>-1&&(t=t.substr(r+1)),u=function(){var i=new RegExp("^"+t+"$",["i"]);o(n,i.test(e.path()))},u()}var o=t(s.ngModel||s.routeModel||"$uiRoute").assign,u=angular.noop;switch(i){case"uiRoute":s.uiRoute?f(s.uiRoute):s.$observe("uiRoute",f);break;case"ngHref":s.ngHref?a(s.ngHref):s.$observe("ngHref",a);break;case"href":a(s.href)}n.$on("$routeChangeSuccess",function(){u()}),n.$on("$stateChangeSuccess",function(){u()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(e,t){return{registerFor:function(e){var n,r,i,s,o,u,a;return r=angular.element.prototype.css,e.prototype.css=function(e,t){var n,i;i=this,n=i[0];if(!!n&&n.nodeType!==3&&n.nodeType!==8&&!!n.style)return r.call(i,e,t)},u=function(e){return e&&e.document&&e.location&&e.alert&&e.setInterval},a=function(e,t,n){var r,i,s,o,a;return r=e[0],a={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[t],i=a[0],o=a[1],s=a[2],u(r)?angular.isDefined(n)?r.scrollTo(e[s].call(e),n):o in r?r[o]:r.document.documentElement[i]:angular.isDefined(n)?r[i]=n:r[i]},t.getComputedStyle?(s=function(e){return t.getComputedStyle(e,null)},n=function(e,t){return parseFloat(t)}):(s=function(e){return e.currentStyle},n=function(e,t){var n,r,i,s,o,u,a;return n=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),s.test(t)?(a=e.style,r=a.left,o=e.runtimeStyle,u=o&&o.left,o&&(o.left=a.left),a.left=t,i=a.pixelLeft,a.left=r,u&&(o.left=u),i):parseFloat(t)}),i=function(e,t){var r,i,o,a,f,l,c,h,p,d,v,m,g;return u(e)?(r=document.documentElement[{height:"clientHeight",width:"clientWidth"}[t]],{base:r,padding:0,border:0,margin:0}):(g={width:[e.offsetWidth,"Left","Right"],height:[e.offsetHeight,"Top","Bottom"]}[t],r=g[0],c=g[1],h=g[2],l=s(e),v=n(e,l["padding"+c])||0,m=n(e,l["padding"+h])||0,i=n(e,l["border"+c+"Width"])||0,o=n(e,l["border"+h+"Width"])||0,a=l["margin"+c],f=l["margin"+h],p=n(e,a)||0,d=n(e,f)||0,{base:r,padding:v+m,border:i+o,margin:p+d})},o=function(e,t,n){var r,o,u;o=i(e,t);if(o.base>0)return{base:o.base-o.padding-o.border,outer:o.base,outerfull:o.base+o.margin}[n];r=s(e),u=r[t];if(u<0||u===null)u=e.style[t]||0;return u=parseFloat(u)||0,{base:u-o.padding-o.border,outer:u,outerfull:u+o.padding+o.border+o.margin}[n]},angular.forEach({before:function(e){var t,n,r,i,s,o,u;s=this,n=s[0],i=s.parent(),t=i.contents();if(t[0]===n)return i.prepend(e);for(r=o=1,u=t.length-1;1<=u?o<=u:o>=u;r=1<=u?++o:--o)if(t[r]===n){angular.element(t[r-1]).after(e);return}throw new Error("invalid DOM structure "+n.outerHTML)},height:function(e){var t;return t=this,angular.isDefined(e)?(angular.isNumber(e)&&(e+="px"),r.call(t,"height",e)):o(this[0],"height","base")},outerHeight:function(e){return o(this[0],"height",e?"outerfull":"outer")},offset:function(e){var t,n,r,i,s,o;s=this;if(arguments.length)return e===void 0?s:e;t={top:0,left:0},i=s[0],n=i&&i.ownerDocument;if(!n)return;return r=n.documentElement,i.getBoundingClientRect&&(t=i.getBoundingClientRect()),o=n.defaultView||n.parentWindow,{top:t.top+(o.pageYOffset||r.scrollTop)-(r.clientTop||0),left:t.left+(o.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}},scrollTop:function(e){return a(this,"top",e)},scrollLeft:function(e){return a(this,"left",e)}},function(t,n){if(!e.prototype[n])return e.prototype[n]=t})}}}]).run(["$log","$window","jqLiteExtras",function(e,t,n){if(!t.jQuery)return n.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("ngScrollViewport",["$log",function(){return{controller:["$scope","$element",function(e,t){return t}]}}]).directive("ngScroll",["$log","$injector","$rootScope","$timeout",function(e,t,n,r){return{require:["?^ngScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(i,s,o){return function(s,u,a,f){var l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X;D=a.ngScroll.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/);if(!D)throw new Error('Expected ngScroll in form of "item_ in _datasource_" but got "'+a.ngScroll+'"');M=D[1],E=D[2],A=function(e){return angular.isObject(e)&&e.get&&angular.isFunction(e.get)},w=s[E];if(!A(w)){w=t.get(E);if(!A(w))throw new Error(E+" is not a valid datasource")}return g=Math.max(3,+a.bufferSize||10),m=function(){return X.height()*Math.max(.1,+a.padding||.1)},q=function(e){return e[0].scrollHeight||e[0].document.documentElement.scrollHeight},l=null,o(z=s.$new(),function(e){var t,n,r,s,o,u;s=e[0].localName;if(s==="dl")throw new Error("ng-scroll directive does not support <"+e[0].localName+"> as a repeating tag: "+e[0].outerHTML);return s!=="li"&&s!=="tr"&&(s="div"),u=f[0]||angular.element(window),u.css({"overflow-y":"auto",display:"block"}),r=function(e){var t,n,r;switch(e){case"tr":return r=angular.element("<table><tr><td><div></div></td></tr></table>"),t=r.find("div"),n=r.find("tr"),n.paddingHeight=function(){return t.height.apply(t,arguments)},n;default:return n=angular.element("<"+e+"></"+e+">"),n.paddingHeight=n.height,n}},n=function(e,t,n){return t[{top:"before",bottom:"after"}[n]](e),{paddingHeight:function(){return e.paddingHeight.apply(e,arguments)},insert:function(t){return e[{top:"after",bottom:"before"}[n]](t)}}},o=n(r(s),i,"top"),t=n(r(s),i,"bottom"),z.$destroy(),l={viewport:u,topPadding:o.paddingHeight,bottomPadding:t.paddingHeight,append:t.insert,prepend:o.insert,bottomDataPos:function(){return q(u)-t.paddingHeight()},topDataPos:function(){return o.paddingHeight()}}}),X=l.viewport,k=1,P=1,v=[],H=[],x=!1,p=!1,_=w.loading||function(){},O=!1,j=function(e,t){var n,r;for(n=r=e;e<=t?r<t:r>t;n=e<=t?++r:--r)v[n].scope.$destroy(),v[n].element.remove();return v.splice(e,t-e)},B=function(){return k=1,P=1,j(0,v.length),l.topPadding(0),l.bottomPadding(0),H=[],x=!1,p=!1,c(!1)},d=function(){return X.scrollTop()+X.height()},W=function(){return X.scrollTop()},R=function(){return!x&&l.bottomDataPos()<d()+m()},y=function(){var t,n,r,i,s,o;t=0,i=0;for(n=s=o=v.length-1;o<=0?s<=0:s>=0;n=o<=0?++s:--s){r=v[n].element.outerHeight(!0);if(!(l.bottomDataPos()-t-r>d()+m()))break;t+=r,i++,x=!1}if(i>0)return l.bottomPadding(l.bottomPadding()+t),j(v.length-i,v.length),P-=i,e.log("clipped off bottom "+i+" bottom padding "+l.bottomPadding())},U=function(){return!p&&l.topDataPos()>W()-m()},b=function(){var t,n,r,i,s,o;i=0,r=0;for(s=0,o=v.length;s<o;s++){t=v[s],n=t.element.outerHeight(!0);if(!(l.topDataPos()+i+n<W()-m()))break;i+=n,r++,p=!1}if(r>0)return l.topPadding(l.topPadding()+i),j(0,r),k+=r,e.log("clipped off top "+r+" top padding "+l.topPadding())},S=function(e,t){O||(O=!0,_(!0));if(H.push(e)===1)return N(t)},L=function(e,t){var n,r,i;return n=s.$new(),n[M]=t,r=e>k,n.$index=e,r&&n.$index--,i={scope:n},o(n,function(t){return i.element=t,r?e===P?(l.append(t),v.push(i)):(v[e-k].element.after(t),v.splice(e-k+1,0,i)):(l.prepend(t),v.unshift(i))}),{appended:r,wrapper:i}},h=function(e,t){var n;return e?l.bottomPadding(Math.max(0,l.bottomPadding()-t.element.outerHeight(!0))):(n=l.topPadding()-t.element.outerHeight(!0),n>=0?l.topPadding(n):X.scrollTop(X.scrollTop()+t.element.outerHeight(!0)))},c=function(t,n,i){var s;return s=function(){e.log("top {actual="+l.topDataPos()+" visible from="+W()+" bottom {visible through="+d()+" actual="+l.bottomDataPos()+"}"),R()?S(!0,t):U()&&S(!1,t);if(i)return i()},n?r(function(){var e,t,r;for(t=0,r=n.length;t<r;t++)e=n[t],h(e.appended,e.wrapper);return s()}):s()},C=function(e,t){return c(e,t,function(){return H.shift(),H.length===0?(O=!1,_(!1)):N(e)})},N=function(t){var n;return n=H[0],n?v.length&&!R()?C(t):w.get(P,g,function(n){var r,i,s,o;i=[];if(n.length===0)x=!0,l.bottomPadding(0),e.log("appended: requested "+g+" records starting from "+P+" recieved: eof");else{b();for(s=0,o=n.length;s<o;s++)r=n[s],i.push(L(++P,r));e.log("appended: requested "+g+" received "+n.length+" buffer size "+v.length+" first "+k+" next "+P)}return C(t,i)}):v.length&&!U()?C(t):w.get(k-g,g,function(n){var r,i,s,o;i=[];if(n.length===0)p=!0,l.topPadding(0),e.log("prepended: requested "+g+" records starting from "+(k-g)+" recieved: bof");else{y();for(r=s=o=n.length-1;o<=0?s<=0:s>=0;r=o<=0?++s:--s)i.unshift(L(--k,n[r]));e.log("prepended: requested "+g+" received "+n.length+" buffer size "+v.length+" first "+k+" next "+P)}return C(t,i)})},F=function(){if(!n.$$phase&&!O)return c(!1),s.$apply()},X.bind("resize",F),I=function(){if(!n.$$phase&&!O)return c(!0),s.$apply()},X.bind("scroll",I),s.$watch(w.revision,function(){return B()}),w.scope?T=w.scope.$new():T=s.$new(),s.$on("$destroy",function(){return T.$destroy(),X.unbind("resize",F),X.unbind("scroll",I)}),T.$on("update.items",function(e,t,n){var r,i,s,o,u;if(angular.isFunction(t)){i=function(e){return t(e.scope)};for(s=0,o=v.length;s<o;s++)r=v[s],i(r)}else 0<=(u=t-k-1)&&u<v.length&&(v[t-k-1].scope[M]=n);return null}),T.$on("delete.items",function(e,t){var n,r,i,s,o,u,a,f,l,h,p,d;if(angular.isFunction(t)){i=[];for(u=0,l=v.length;u<l;u++)r=v[u],i.unshift(r);o=function(e){if(t(e.scope))return j(i.length-1-n,i.length-n),P--};for(n=a=0,h=i.length;a<h;n=++a)s=i[n],o(s)}else 0<=(d=t-k-1)&&d<v.length&&(j(t-k-1,t-k),P--);for(n=f=0,p=v.length;f<p;n=++f)r=v[n],r.scope.$index=k+n;return c(!1)}),T.$on("insert.item",function(e,t,n){var r,i,s,o,u,a,f,l,h,p,d,m;i=[];if(angular.isFunction(t)){s=[];for(a=0,h=v.length;a<h;a++)n=v[a],s.unshift(n);u=function(e){var s,o,u,a,f;if(o=t(e.scope)){L=function(e,t){return L(e,t),P++};if(angular.isArray(o)){f=[];for(s=u=0,a=o.length;u<a;s=++u)n=o[s],f.push(i.push(L(r+s,n)));return f}return i.push(L(r,o))}};for(r=f=0,p=s.length;f<p;r=++f)o=s[r],u(o)}else 0<=(m=t-k-1)&&m<v.length&&(i.push(L(t,n)),P++);for(r=l=0,d=v.length;l<d;r=++l)n=v[r],n.scope.$index=k+r;return c(!1,i)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){return{require:"^?uiScrollfixTarget",link:function(t,n,r,i){function u(){var t;if(angular.isDefined(e.pageYOffset))t=e.pageYOffset;else{var i=document.compatMode&&document.compatMode!=="BackCompat"?document.documentElement:document.body;t=i.scrollTop}!n.hasClass("ui-scrollfix")&&t>r.uiScrollfix?n.addClass("ui-scrollfix"):n.hasClass("ui-scrollfix")&&t<r.uiScrollfix&&n.removeClass("ui-scrollfix")}var s=n[0].offsetTop,o=i&&i.$element||angular.element(e);r.uiScrollfix?typeof r.uiScrollfix=="string"&&(r.uiScrollfix.charAt(0)==="-"?r.uiScrollfix=s-parseFloat(r.uiScrollfix.substr(1)):r.uiScrollfix.charAt(0)==="+"&&(r.uiScrollfix=s+parseFloat(r.uiScrollfix.substr(1)))):r.uiScrollfix=s,o.on("scroll",u),t.$on("$destroy",function(){o.off("scroll",u)})}}}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function(e){this.$element=e}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,t,n){e.$watch(n.uiShow,function(e){e?t.addClass("ui-show"):t.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,t,n){e.$watch(n.uiHide,function(e){e?t.addClass("ui-hide"):t.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,t,n){e.$watch(n.uiToggle,function(e){e?t.removeClass("ui-hide").addClass("ui-show"):t.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(e){return function(t,n){if(n===!1)return t;if((n||angular.isUndefined(n))&&angular.isArray(t)){var r=[],i=angular.isString(n)?e(n):function(e){return e},s=function(e){return angular.isObject(e)?i(e):e};angular.forEach(t,function(e){var t=!1;for(var n=0;n<r.length;n++)if(angular.equals(s(r[n]),s(e))){t=!0;break}t||r.push(e)}),t=r}return t}}]),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){function u(t){if(angular.isString(t)){e.$watch(t,function(){angular.forEach(s,function(e){e(r.$modelValue)})});return}if(angular.isArray(t)){angular.forEach(t,function(t){e.$watch(t,function(){angular.forEach(s,function(e){e(r.$modelValue)})})});return}angular.isObject(t)&&angular.forEach(t,function(t,n){angular.isString(t)&&e.$watch(t,function(){s[n](r.$modelValue)}),angular.isArray(t)&&angular.forEach(t,function(t){e.$watch(t,function(){s[n](r.$modelValue)})})})}var i,s={},o=e.$eval(n.uiValidate);if(!o)return;angular.isString(o)&&(o={validator:o}),angular.forEach(o,function(t,n){i=function(i){var s=e.$eval(t,{$value:i});return angular.isObject(s)&&angular.isFunction(s.then)?(s.then(function(){r.$setValidity(n,!0)},function(){r.$setValidity(n,!1)}),i):s?(r.$setValidity(n,!0),i):(r.$setValidity(n,!1),i)},s[n]=i,r.$formatters.push(i),r.$parsers.push(i)}),n.uiValidateWatch&&u(e.$eval(n.uiValidateWatch))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]);